<!doctype html>
<html class="no-js" lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Chronic Diseases Dashboard</title>
	<link rel="stylesheet" href="css/foundation.css" />
	<link rel="stylesheet" href="css/jquery-ui.min.css" />
	<link rel="stylesheet" href="css/app.css" />
	<script src="js/vendor/modernizr.js"></script>
</head>
<body>
	<header> 
		<div data-magellan-expedition="fixed">
			<nav class="top-bar" data-topbar role="navigation">
				<ul class="title-area"> 
					<li class="name"> 
						<img src="img/CTG_logo.png" />
					</li> 
					<li class="toggle-topbar menu-icon"><a href="#">Menu</a>
					</li> 
				</ul>

				<section class="top-bar-section">
					<ul class="right">
						<li data-magellan-arrival="introduction-page"><a href="#introduction-page">Home</a></li>
						<li data-magellan-arrival="nutrition-page"><a href="#nutrition-page">Nutrition Facts</a></li>
						<li data-magellan-arrival="minerals-page"><a href="#minerals-page">Minerals</a></li>
						<li data-magellan-arrival="exercises-page"><a href="#exercises-page">Exercises</a></li>
					</ul>
				</section>
			</nav>
		</div>
	</header>

	
	<a name="introduction-page"></a>
	<div class="page" id="introduction-page">
		
		<div class="introduction-body large-6 medium-6 columns">
			
			<h1 data-magellan-destination="introduction-page">What do you eat?</h1>
			<p>Enter the informations, then scroll down to check it out</p>
		
		</div>


		<div class="nav large-6 medium-6 columns">
			<div style="position: absolute; z-index: 1; top: 10px; padding: 5px; color: white; left: 40%; background: none repeat scroll 0% 0% green; display: none;" id="ajaxLoader" class="ajax-loader">
				<img width="20" height="20" src="img/loader.svg"> Loading... 
			</div>
		<!-- <div class="nav input-bar"> -->
			<div class="large-8 medium-8 small-12 columns">
				<label class="lbl-food-form">Food 1:</label>
				<!--<div class="row collapse">
					<div class="small-10 columns">
						<input type="text" id="srchFoodText1" class="srch-food-text" list="suggestionDatalist"/>
						<datalist id="suggestionDatalist" class="srch-food-datalist">
						</datalist>
					</div>	
					<div class="small-2 columns">
						<a class="button postfix bttSrchFood" for="srchFoodText1"><img src="img/icon_search.png" class="inline" /></a>
					</div>
				</div>-->
				<select id="selectFood1" class="foodSelector">
					<optgroup label="Hamburgers">
						<option value="21233">MC Donald's Cheeseburger</option>
						<option value="21251">Burger King Cheeseburger</option>
						<option value="21214">SUBWAY Tuna Sub</option>
						<option value="36014">French Fries</option>
						<option value="36621">Sweet and Sour Chicken</option>
						<option value="07090">Luncheon Sausage</option>
						<option value="07080">Turkey Ham</option>
						<option value="21107">Regular Hamburger Patty</option>
						<option value="36405">Rice and Black Beans</option>
					</optgroup>    
				</select>
			</div>
			<div class="large-4 medium-4 small-12 columns">
				<label class="lbl-food-form">Serving Size:</label>
				<select id="selectServSize1" class="serv-size-selector">
				</select>
			</div>
			<div class="large-8 medium-8 small-12 columns">
				<label class="lbl-food-form">Food 2:</label>
				<!--<div class="row collapse">
					<div class="small-10 columns">
						<input type="text" id="srchFoodText1" class="srch-food-text" list="suggestionDatalist"/>
						<datalist id="suggestionDatalist" class="srch-food-datalist">
						</datalist>
					</div>
					<div class="small-2 columns">
						<a class="button postfix bttSrchFood" for="srchFoodText1"><img src="img/icon_search.png" class="inline" /></a>
					</div>
				</div>-->
				<select id="selectFood2" class="foodSelector">
					<optgroup label="Hamburgers">
						<option value="21233">MC Donald's Cheeseburger</option>
						<option value="21251">Burger King Cheeseburger</option>
						<option value="21214" selected="true">SUBWAY Tuna Sub</option>
						<option value="36014">French Fries</option>
						<option value="36621">Sweet and Sour Chicken</option>
						<option value="07090">Luncheon Sausage</option>
						<option value="07080">Turkey Ham</option>
						<option value="21107">Regular Hamburger Patty</option>
						<option value="36405">Rice and Black Beans</option>
					</optgroup>
				</select>
			</div>
			<div class="large-4 medium-4 small-12 columns">
				<label class="lbl-food-form">Serving Size:</label>
				<select id="selectServSize2" class="serv-size-selector">
				</select>
			</div>
			<div class="small-8-up medium-8  small-12 columns">
				<label class="lbl-food-form">Weight:</label>
				<input type="text" id="weight" placeholder="Your weight">
			</div>

			<div class="large-4 medium-4 small-12 columns">
				<label class="lbl-food-form">Metric:</label>
				<select id="weight-metric">
					<option value="2.2">lb</option>
					<option value="1">Kg</option>
				</select>
			</div>

			<div class="large-12 medium-12 small-12 columns">
			<a href="#nutrition-page"><button class="btt-check">Compare</button></a></div>
		</div>

	</div>

	<a name="nutrition-page"></a>
	<span data-magellan-destination="nutrition-page"></span>
	<div class="page" id="nutrition-page">
		<div class="row">
			<h2>Nutrition Facts</h2>
			<div class="large-3 medium-6 small-6 columns" id="panelFoodInfo1">
				<div id="divServingSize1" class="div-serving-size"></div>
			</div>
			<div class="large-3 medium-6 small-6 columns" id="panelFoodInfo2">
				<div id="divServingSize2" class="div-serving-size"></div>
			</div>
			<div class="large-6 columns" id="radarPanel">
				<div id="radarPanel" class="radar-container">
					<div id="results">
						<label class="lbl-radar-placeholder">Choose the foods and click <b>Compare</b> to compare...<label>
					</div>
				</div>
			</div>
		</div>
	</div>

	<a name="minerals-page"></a>
	<span data-magellan-destination="minerals-page"></span>
	<div class="page" id="minerals-page">
		<div class="row">
			<h2>Minerals and Vitamins</h2>
	        <div id="bubbleChartContainer"></div>
        </div>
	</div>

	<a name="exercises-page"></a>
	<span data-magellan-destination="exercises-page"></span>
	<div class="page" id="exercises-page">
		<div class="row">
			<h2>Physical Exercises Cost</h2>
			<div class="exercises"></div>
			<div id="barChart"></div>
		</div>
	</div>

	
	<div class="" style="height:100px ;background-color:#022859" id="footer-page">
		<center><p style="color:white;">Center for Technology in Government - 2014</p></center>
	</div>


	<script src="js/vendor/jquery.js"></script>
	<script src="js/jquery-ui.min.js"></script>
	<script src="js/d3/d3.v3.js"></script>
	<script src="js/d3/RadarChart.js"></script>
	<script src="js/d3/d3plus.js"></script>
	<script src="js/script.js"></script>
	<script src="js/exercises.js"></script>
	<script src="js/foundation.min.js"></script>

	<script type="text/javascript">
		$(document).foundation();
	</script>
	<script type="text/javascript">
		$( document ).ajaxStart(function() {
		  $( "#ajaxLoader" ).show();
		});

		$( document ).ajaxStop(function() {
		  $( "#ajaxLoader" ).hide();
		});
		$(document).ready(function(){
				/*$(".srch-food-text").autocomplete({
					source: function( request, response ) {
			        $.ajax({
			          url: "secure/searchFood.php",
			          dataType: "jsonp",
			          data: {
			            q: request.term
			          },
			          success: function( data ) {
			            return data.list.item;
			          }
			        });
			      },
			      minLength: 4,
			      select: function( event, ui ) {
			        console.log(ui.item);
			      }
				}).autocomplete( "instance" )._renderItem = function( ul, item ) {
			      return $( "<li>" )
			        .append( "<a>" + item.name +"</a>" )
			        .appendTo( ul );
			    };*/

				$(".foodSelector").on("change", function(){
					var index = $( ".foodSelector" ).index( this );
					$.getJSON("secure/requestFood.php?food_id="+$(this).val(), function( data ) {
						pushFoodData(data, index);
					});		
				});

				$(".btt-check").on("click", function(event){
					cleanFoodData();

					createChart("results");
					$(".food-info").show();

					if($("#weight").val()){
						exercises_function();
					}
				});

			});

			/*$(".bttSrchFood").click(function(){
				var inputSrch = $("#"+$(this).attr("for"));
				$.getJSON("secure/searchFood.php?q="+inputSrch.val(), function( data ) {
					var foodItems = data.list.item;
					var datalistSug = $(inputSrch.attr("list"));

					for(var i=0;i<foodItems.length;i++){
						console.log(datalistSug);
						$("<option/>", {"label":foodItems[i].name, "value":foodItems[i].ndbno}).appendTo("#"+inputSrch.attr("list"));
					}
				});
			});*/
	</script>
</body>